<div class="expense-list">
  <div class="toolbar">
    <h2>Expenses</h2>
    <div class="filters">
      <input class="input" placeholder="Search category or description" />
    </div>
  </div>

  <form [formGroup]="form" (ngSubmit)="add()" novalidate>
    <div class="row">
      <input class="input" placeholder="Category" formControlName="category" />
      <input class="input" type="number" step="0.01" placeholder="Amount" formControlName="amount" />
      <input class="input" type="date" formControlName="date" />
      <input class="input" placeholder="Description" formControlName="description" />
      <button class="btn" type="submit">Add</button>
    </div>
  </form>

  <div class="alert error" *ngIf="error">{{ error }}</div>

  <div class="table-wrapper" *ngIf="items?.length; else emptyTpl">
    <table class="table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Category</th>
          <th>Amount</th>
          <th>Description</th>
          <th>Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of items">
          <td>{{ e.date | date:'mediumDate' }}</td>
          <td><span class="category">{{ e.category }}</span></td>
          <td class="amount">{{ e.amount | number:'1.2-2' }}</td>
          <td>{{ e.description }}</td>
          <td>
            <app-mark-as-paid-toggle
              [id]="e.id"
              [paid]="e.paid || false"
              [paidAt]="e.paidAt || null"
              resource="expense"
              (changed)="onPaidChanged($event, e)"></app-mark-as-paid-toggle>
          </td>
          <td><button type="button" class="btn ghost" (click)="remove(e.id)">Delete</button></td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #emptyTpl>
    <div class="empty">No expenses yet. Add your first expense above.</div>
  </ng-template>
</div>
